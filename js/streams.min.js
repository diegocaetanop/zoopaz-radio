function toggleMusicOn(a){0<$(".m3uplayer").length&&a==$("#theurl").data("url")?(a=document.getElementById("mediaplayer"),0<a.getPlaylist().length&&("Play"==$("#playbutton").html()?(a.sendEvent("PLAY","true"),$("#playbutton").html("Pause")):(a.sendEvent("PLAY","false"),$("#playbutton").html("Play")))):createPlaylistJs(a)}
function createPlaylistJs(a){$.ajax({type:"GET",url:"index.php",data:"action=createPlaylistJs&dir="+encodeURIComponent(a),success:function(a){var b=$("#content").width();$("#content-player").html(a);isMobile()&&($("#musicindex").remove(),$("#playercontrols").remove(),a=b-16,$("#mediaplayer_wrapper").css("width",a+"px"))}})}
function openDir(a){location.hash="#/open/"+encodeURIComponent(a);$.ajax({type:"GET",url:"index.php",data:"action=openDir&url="+encodeURIComponent(a)+"&dir="+encodeURIComponent(a),success:function(a){$("#content").html(a)}})}function init(){var a=window.location.hash,a=a.replace(/^#/,""),a=a.split("/");switch(a[1]){case "open":a=decodeURIComponent(a[2]),openDir(a)}}
function search(a){if(3>a.length)return!1;0<$("#playbutton").length&&$("#playbutton").parent().remove();$.ajax({type:"GET",url:"index.php",data:"action=search&q="+encodeURIComponent(a),success:function(a){$("#musicindex").html(a)}})}
$(document).ready(function(){init();0<$("#content-player").length&&0<$(".m3uplayer").length&&$("#playbutton").html("Pause");$(document).on("click","#playbutton",function(){toggleMusicOn($(this).data("url"))});$(document).on("click",".droplink",function(){openDir($(this).data("url"))});$(document).on("click",".dirlink",function(){openDir($(this).data("url"))});$(document).on("click",".dirlinkcover",function(){openDir($(this).data("url"))});prevtime=parseInt((new Date).getTime());threshold=500;curval=
"";t=null;$(document).on("keyup","#search",function(){curval=$(this).val();curtime=parseInt((new Date).getTime());next=prevtime+threshold;prevtime=curtime;curtime<next&&(clearTimeout(t),t=setTimeout("search('"+curval+"')",threshold))})});
